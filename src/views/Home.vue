<template>
	<main>
		<p class="weather__title">  {{ title }} </p>
		<div class="weather__location">
			<select v-model="currentCity">
				<option v-for="city in allCities" :key="city">
					{{ city }}
				</option>
			</select> 
			<br>
			<button @click="fetchData">choose city</button>
		</div>
		
		<div class="weather_days">
			<section class="weather__today">
				<p class="weather__days--title"> today: </p> 
					<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M55 35C67.325 35 74.315 42.87 75.33 52.37H75.64C83.57 52.37 90 58.555 90 66.185C90 73.815 83.57 80 75.64 80H34.36C26.43 80 20 73.815 20 66.185C20 58.555 26.43 52.37 34.36 52.37H34.67C35.695 42.805 42.675 35 55 35ZM55 40C46.75 40 39.565 46.35 39.565 55.125C39.565 56.515 38.295 57.605 36.84 57.605H34.09C29.07 57.605 25 61.5 25 66.305C25 71.1 29.07 75 34.09 75H75.91C80.93 75 85 71.105 85 66.3C85 61.5 80.93 57.605 75.91 57.605H73.16C71.71 57.605 70.435 56.515 70.435 55.125C70.435 46.24 63.25 40 55 40ZM41.96 20C49.24 20 55.59 24.14 58.725 30.225C56.5949 29.9609 54.4428 29.924 52.305 30.115C51.07 28.5254 49.4886 27.2384 47.6812 26.352C45.8738 25.4657 43.888 25.0033 41.875 25C38.731 25.0149 35.6932 26.139 33.2967 28.1741C30.9002 30.2093 29.299 33.0249 28.775 36.125L28.59 37.175C28.3895 38.337 27.7848 39.3908 26.8827 40.1502C25.9806 40.9095 24.8392 41.3257 23.66 41.325H22.37C18.3 41.325 15 44.665 15 48.785C15 51.635 16.575 54.11 18.89 55.365C17.82 56.725 16.94 58.245 16.29 59.875C13.908 58.4238 12.051 56.2507 10.9889 53.6716C9.92672 51.0925 9.71481 48.2419 10.3839 45.5342C11.0531 42.8264 12.5684 40.4026 14.7096 38.6151C16.8508 36.8277 19.5063 35.7697 22.29 35.595L23.395 35.57C24.166 31.2066 26.4495 27.2544 29.8445 24.407C33.2395 21.5597 37.529 19.9994 41.96 20Z" fill="white"/>
					</svg>
				<div>{{ weather.temperature }} </div>
				<div>{{ weather.description }} </div>
					<svg width="50" height="50" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M32.5 74.985C34.4891 74.985 36.3968 75.7752 37.8033 77.1817C39.2098 78.5882 40 80.4959 40 82.485C40 84.4741 39.2098 86.3818 37.8033 87.7883C36.3968 89.1948 34.4891 89.985 32.5 89.985C30.5109 89.985 28.6032 89.1948 27.1967 87.7883C25.7902 86.3818 25 84.4741 25 82.485C25 80.4959 25.7902 78.5882 27.1967 77.1817C28.6032 75.7752 30.5109 74.985 32.5 74.985V74.985ZM32.5 79.985C31.837 79.985 31.2011 80.2484 30.7322 80.7172C30.2634 81.1861 30 81.822 30 82.485C30 83.148 30.2634 83.7839 30.7322 84.2528C31.2011 84.7216 31.837 84.985 32.5 84.985C33.163 84.985 33.7989 84.7216 34.2678 84.2528C34.7366 83.7839 35 83.148 35 82.485C35 81.822 34.7366 81.1861 34.2678 80.7172C33.7989 80.2484 33.163 79.985 32.5 79.985V79.985ZM78.065 41.105C81.1404 41.1426 84.0831 42.3636 86.2817 44.5142C88.4804 46.6649 89.766 49.5799 89.8716 52.6537C89.9771 55.7275 88.8945 58.7238 86.8485 61.0202C84.8025 63.3166 81.9506 64.7365 78.885 64.985L77.925 65.01L77.51 65.04H71.48C72.58 66.73 73.215 68.75 73.215 70.915C73.215 76.99 68.65 81.845 62.625 81.845C56.635 81.845 53.055 78.375 52.085 73.53C52.0099 73.2043 52.001 72.8669 52.0586 72.5377C52.1162 72.2084 52.2392 71.8941 52.4204 71.6133C52.6016 71.3324 52.8372 71.0908 53.1134 70.9026C53.3896 70.7144 53.7008 70.5835 54.0284 70.5176C54.3561 70.4517 54.6937 70.4522 55.0211 70.5191C55.3486 70.5859 55.6593 70.7177 55.935 70.9068C56.2106 71.0958 56.4456 71.3381 56.6259 71.6195C56.8063 71.9009 56.9284 72.2156 56.985 72.545C57.52 75.205 59.21 76.845 62.625 76.845C65.82 76.845 68.21 74.295 68.21 70.915C68.21 68.065 66.16 65.685 63.425 65.13L62.72 65.035L12.525 65.04C11.9003 65.0412 11.2977 64.8084 10.8361 64.3875C10.3744 63.9666 10.0871 63.3881 10.0306 62.7659C9.97418 62.1437 10.1527 61.523 10.5311 61.0258C10.9095 60.5287 11.4603 60.1913 12.075 60.08L12.525 60.04L61.93 60.035L62.215 60.01C62.475 60.01 62.74 60.02 63 60.04H77.51L77.635 60.05L78.065 60.01C81.685 60.01 84.66 57.255 84.995 53.725L85.03 53.06C85.087 51.2148 84.4087 49.4224 83.1442 48.0773C81.8798 46.7322 80.1327 45.9445 78.2875 45.8875C77.3738 45.8593 76.4635 46.0113 75.6086 46.3348C74.7537 46.6584 73.9709 47.1472 73.3048 47.7733C71.9597 49.0377 71.172 50.7848 71.115 52.63C71.1017 52.9622 71.0222 53.2884 70.8812 53.5896C70.7402 53.8907 70.5406 54.1607 70.294 54.3837C70.0475 54.6068 69.7589 54.7784 69.4451 54.8885C69.1314 54.9987 68.7989 55.0451 68.467 55.0252C68.1351 55.0052 67.8105 54.9192 67.5122 54.7723C67.214 54.6254 66.948 54.4204 66.7299 54.1695C66.5118 53.9185 66.346 53.6265 66.2421 53.3107C66.1383 52.9948 66.0984 52.6614 66.125 52.33C66.3121 49.2905 67.6516 46.437 69.8703 44.3511C72.089 42.2653 75.0198 41.1043 78.065 41.105V41.105ZM48.825 17.75C53.1102 17.7394 57.2242 19.4315 60.2618 22.4541C63.2994 25.4768 65.0119 29.5823 65.0225 33.8675C65.0331 38.1527 63.341 42.2667 60.3184 45.3043C57.2957 48.3419 53.1902 50.0544 48.905 50.065H12.525C11.9003 50.0661 11.2977 49.8334 10.8361 49.4125C10.3744 48.9916 10.0871 48.4131 10.0306 47.7909C9.97418 47.1687 10.1527 46.5479 10.5311 46.0508C10.9095 45.5537 11.4603 45.2163 12.075 45.105L12.525 45.065H48.825C51.031 45.065 53.1875 44.4109 55.0219 43.1854C56.8562 41.9599 58.286 40.218 59.1304 38.18C59.9748 36.142 60.196 33.8993 59.766 31.7356C59.336 29.5719 58.2741 27.5842 56.7145 26.024C55.155 24.4637 53.1678 23.4009 51.0043 22.9699C48.8408 22.539 46.598 22.7592 44.5596 23.6027C42.5212 24.4462 40.7787 25.8752 39.5524 27.709C38.3261 29.5427 37.671 31.699 37.67 33.905C37.67 34.568 37.4066 35.2039 36.9378 35.6728C36.4689 36.1416 35.833 36.405 35.17 36.405C34.507 36.405 33.8711 36.1416 33.4022 35.6728C32.9334 35.2039 32.67 34.568 32.67 33.905C32.67 31.7835 33.0879 29.6828 33.8997 27.7227C34.7116 25.7627 35.9016 23.9818 37.4017 22.4817C38.9018 20.9816 40.6827 19.7916 42.6428 18.9797C44.6028 18.1679 46.7035 17.75 48.825 17.75ZM17.5 15C19.4891 15 21.3968 15.7902 22.8033 17.1967C24.2098 18.6032 25 20.5109 25 22.5C25 24.4891 24.2098 26.3968 22.8033 27.8033C21.3968 29.2098 19.4891 30 17.5 30C15.5109 30 13.6032 29.2098 12.1967 27.8033C10.7902 26.3968 10 24.4891 10 22.5C10 20.5109 10.7902 18.6032 12.1967 17.1967C13.6032 15.7902 15.5109 15 17.5 15V15ZM17.5 20C16.837 20 16.2011 20.2634 15.7322 20.7322C15.2634 21.2011 15 21.837 15 22.5C15 23.163 15.2634 23.7989 15.7322 24.2678C16.2011 24.7366 16.837 25 17.5 25C18.163 25 18.7989 24.7366 19.2678 24.2678C19.7366 23.7989 20 23.163 20 22.5C20 21.837 19.7366 21.2011 19.2678 20.7322C18.7989 20.2634 18.163 20 17.5 20ZM82.51 10C83.4949 10 84.4702 10.194 85.3801 10.5709C86.2901 10.9478 87.1169 11.5003 87.8133 12.1967C88.5097 12.8931 89.0622 13.7199 89.4391 14.6299C89.816 15.5398 90.01 16.5151 90.01 17.5C90.01 18.4849 89.816 19.4602 89.4391 20.3701C89.0622 21.2801 88.5097 22.1069 87.8133 22.8033C87.1169 23.4997 86.2901 24.0522 85.3801 24.4291C84.4702 24.806 83.4949 25 82.51 25C80.5209 25 78.6132 24.2098 77.2067 22.8033C75.8002 21.3968 75.01 19.4891 75.01 17.5C75.01 15.5109 75.8002 13.6032 77.2067 12.1967C78.6132 10.7902 80.5209 10 82.51 10V10ZM82.51 15C81.847 15 81.2111 15.2634 80.7422 15.7322C80.2734 16.2011 80.01 16.837 80.01 17.5C80.01 18.163 80.2734 18.7989 80.7422 19.2678C81.2111 19.7366 81.847 20 82.51 20C83.173 20 83.8089 19.7366 84.2778 19.2678C84.7466 18.7989 85.01 18.163 85.01 17.5C85.01 16.837 84.7466 16.2011 84.2778 15.7322C83.8089 15.2634 83.173 15 82.51 15Z" fill="white"/>
					</svg>
				<div>{{ weather.wind }}</div>
			</section>
			<p class="weather__days--title">tomorrow:</p>
			<section class="weather__forecast">
				{{ weather.forecast[0].temperature }} 
				/
				{{ weather.forecast[0].wind }} 
			</section>
			<p class="weather__days--title">day after tomorrow:</p> 
			<section class="weather__forecast">
				{{ weather.forecast[1].temperature }}
				/
				{{ weather.forecast[1].wind }} 
			</section>
		</div>
	</main>
</template>

<script>
export default {
	data() {
		return {
			title: 'Whats the weather in:',
			weather: {},
			error: '',
			currentCity: 'Oslo',
			allCities: [ "Oslo", "Bergen", "TromsÃ¸", "Kristiansand", "Stavanger", "Kautokeino", "Trondheim", "Lillehammer" ],
		}
	},

	created() {
			this.fetchData();
	},

	methods: {
		async fetchData() {
			const url = `https://goweather.herokuapp.com/weather/${this.currentCity}`;
			const response = await fetch(url);
			try {
				await this.handleResponse(response);
			} catch (error) {
				this.error = error.message;
			}
		},

		async handleResponse(response) {
			if (response.status >= 200 && response.status < 300) {
				const results = await response.json();
				this.weather = results;
			}
		},
	}
}
</script>

<style>

div {
	padding-bottom: var(--padding-bottom-small);
}

main {
	width: 100vw;
	display: flex;
	flex-direction: column;
	justify-content:space-evenly;
	text-align: center;
	align-content: center;
}

select {
	margin: 10px;
	padding: 5px;
	font-size: var(--font-size);
	font-family: var(--font-family);
	color: var(--title-color);
	border-radius: var(--border-radius);
	text-align: center;
	background-color: var(--foreground);
	border-style: none;
	box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
}

button {
	padding: var(--padding-small);
	border-radius: var(--border-radius);
	background-color: var(--colored-details);
	margin-bottom: var(--margin-bottom-small);
	box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
}

.weather__title {
	margin-top: var(--margin-top-big);
	color: var(--colored-details);
}

.weather__days--title {
	padding-bottom: var(--padding-bottom-small);
}

.weather__today {
	margin-right: var(--margin-left-right);
	margin-left: var(--margin-left-right);
	background: var(--foreground);
	margin-bottom: var(--margin-bottom-small);
	border-radius: var(--border-radius);
	padding: var(--padding-big);
	box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;

}

.weather__forecast {
	padding: var(--padding-big);
	margin-right: var(--margin-left-right);
	margin-left: var(--margin-left-right);
	background: var(--foreground);
	margin-bottom: var(--margin-bottom-small);
	border-radius: var(--border-radius);
	box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
}
</style>

